{"version":3,"file":"utilis_indexDb_cjs.bundle.js","mappings":"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","sources":["webpack://songs/./utilis/indexDb.cjs"],"sourcesContent":["function TTT({safeOp}){\n\n\tfunction dealWithConstraint(error){\n\t\tif(error.name.toLowerCase() == \"constrainterror\"){\n\t\t\treturn { name:error.name, code:6, message:error.message };\n\t\t}\n\t\treturn error;\n\t}\n\tfunction toL(name){\n\t\treturn safeOp(name,\"toLowerCase\",null);\n\t}\n\tthis.initialize = ()=>{\n\t\treturn new Promise((resolve,reject)=>{\n\t\t\tif(this.version){\n\t\t\t\tthis.version++;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.version = 1;\n\t\t\tvar request = indexedDB.open('Test',this.version);\n\t\t\trequest.onupgradeneeded = ()=>{\n\t\t\t\tvar db = request.result;\n\t\t\t\tconsole.log(\"Hey, I'm called\");\n\t\t\t\tvar store1 = db.createObjectStore('Categorie',{ autoIncrement: true});\n\t\t\t\tvar store2 = db.createObjectStore('Song',{ autoIncrement:true});\n\n\t\t\t\tvar req1 = store1.createIndex(\"by_name\",\"name\",{ unique:true});\n\t\t\t\tvar req2 = store2.createIndex(\"by_song_cat\", [\"name\",\"cat\"], { unique:true});\n\t\t\t\tvar req3 = store2.createIndex(\"by_cat\",\"cat\");\n\n\t\t\t\tvar sequences = new PSeq();\n\n\t\t\t\tvar i1 = ()=>{\n\t\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\t\treq1.onsuccess = ()=> resolve(true);\n\t\t\t\t\t\treq1.onerror = ()=> reject(req1.error)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tvar i2 = ()=>{\n\t\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\t\treq2.onsuccess = ()=> resolve(true);\n\t\t\t\t\t\treq2.onerror = ()=> reject(req2.error);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tvar i3 = ()=>{\n\t\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\t\treq3.onsuccess = ()=> resolve(true);\n\t\t\t\t\t\treq3.onerror = ()=> reject(req3.error);\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tsequences.subscribe(sequences.add(i1),()=>{\n\t\t\t\t\tconsole.log('Index1 created with success');\n\t\t\t\t},(e)=>{\n\t\t\t\t\tconsole.log('Error while creating Index1',e);\n\t\t\t\t\treject(e);\n\t\t\t\t})\n\t\t\t\tsequences.subscribe(sequences.add(i2),()=>{\n\t\t\t\t\tconsole.log(\"Index2 created with success\");\n\t\t\t\t},(e)=>{\n\t\t\t\t\tconsole.log(\"Error while creating Index2\",e);\n\t\t\t\t\treject(e);\n\t\t\t\t})\n\t\t\t\tsequences.subscribe(sequences.add(i3),()=>{\n\t\t\t\t\tconsole.log(\"Index3 created with success\");\n\t\t\t\t\tresolve(true);\n\t\t\t\t},(e)=> {\n\t\t\t\t\tconsole.log(\"Error while creating Index3\");\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\n\t\t\t};\n\t\t\trequest.onblocked = ()=>{\n\t\t\t\tconsole.log(\"Hey, someone is blocking be\");\n\t\t\t}\n\t\t\trequest.onerror = ()=> reject(request.error);\n\t\t})\n\t}\n\tthis.initialize().Oups((e)=>{\n\t\tconsole.error(\"Initializing indexedDB Error\",e);\n\t});\n\tthis.clear = ()=>{\n\t\treturn new Promise((resolve,reject)=>{\n\t\t\tvar request = indexedDB.open('Test',this.version+1);\n\t\t\tconsole.log(\"The database version is\",this.version);\n\t\t\trequest.onupgradeneeded = ()=>{\n\t\t\t\tconsole.log(\"Choops\");\n\t\t\t\tvar db = request.result;\n\t\t\t\ttry{\n\t\t\t\t\tArray.prototype.forEach.call(db.objectStoreNames,(o)=>{\n\t\t\t\t\t\tdb.deleteObjectStore(o);\n\t\t\t\t\t});\n\t\t\t\t\tresolve(true);\n\t\t\t\t}\n\t\t\t\tcatch(e){\n\t\t\t\t\tconsole.log(\"Clear Error\",e);\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\trequest.onerror = ()=>{\n\t\t\t\tconsole.log(\"Clear Error\",request,error);\n\t\t\t\treject(request.error);\n\t\t\t}\n\t\t})\n\t}\n\tthis.txR = (f,e)=>{\n\t\tvar request = indexedDB.open('Test');\n\t\trequest.onsuccess = ()=>{\n\t\t\tvar db = request.result;\n\t\t\tdb.onversionchange = ()=>{\n\t\t\t\tconsole.log(\"Some is trying to change version\");\n\t\t\t\tdb.close();\n\t\t\t}\n\t\t\tif(!this.version)\n\t\t\t\tthis.version = db.version;\n\n\t\t\tif(!db.objectStoreNames.length){\n\t\t\t\tthis.initialize().then(()=>this.txR(f,e)).Oups((er)=> e(er) );\n\t\t\t}\n\t\t\telse{\n\t\t\t\tvar tx = db.transaction(db.objectStoreNames,'readonly');\n\t\t\t\tf(tx);\n\t\t\t}\n\t\t}\n\t\t\n\t\trequest.onerror = ()=>{\n\t\t\te(request.error);\n\t\t}\n\t}\n\tthis.txW = (f,e)=>{\n\t\tvar request = indexedDB.open('Test');\n\t\trequest.onsuccess = ()=>{\n\t\t\tvar db = request.result;\n\t\t\tdb.onversionchange = ()=>{\n\t\t\t\tconsole.log(\"Someone is trying to change version\");\n\t\t\t\tdb.close();\n\t\t\t}\n\t\t\tif(!this.version)\n\t\t\t\tthis.version = db.version;\n\n\t\t\tif(!db.objectStoreNames.length){\n\t\t\t\tthis.initialize().then(()=>this.txW(f,e)).Oups((er)=> e(er));\n\t\t\t}\n\t\t\telse{\n\t\t\t\tvar tx = db.transaction(db.objectStoreNames,'readwrite');\n\t\t\t\tf(tx);\n\t\t\t}\n\t\t}\n\t\trequest.onerror = ()=>{\n\t\t\te(request.error)\n\t\t}\n\t}\n\n\tthis.insertCategorie = (name)=>{\n\t\tvar txt = 'insertCategorie';\n\t\tvar tx = this.txW;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\ttx((tx)=>{\n\t\t\t\tvar store = tx.objectStore(\"Categorie\");\n\t\t\t\tvar request = store.put({name:toL(name)});\n\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\n\t\t\t\t\tresolve(request.result);\n\t\t\t\t}\n\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\n\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t}\n\t\t\t},(e)=>{\n\t\t\t\tsameCompose(reject,trError);\n\t\t\t})\n\t\t})\n\n\t\treturn p;\n\t}\n\tthis.updateCategorie = (name,newName)=>{\n\t\tvar txt = 'updateCategorie';\n\t\tvar tx = this.txW;\n\t\tvar p =  ()=> new Promise((resolve,reject)=>{\n\t\t\ttx((tx)=>{\n\t\t\t\tvar index = tx.objectStore(\"Categorie\").index(\"by_name\");\n\t\t\t\tvar request = index.openCursor(IDBKeyRange.only(toL(name)));\n\t\t\t\trequest.onsuccess = ()=>{\n\t\t\t\t\tvar cursor = request.result;\n\t\t\t\t\tif(cursor){\n\t\t\t\t\t\tvar req = cursor.update({name:toL(newName)});\n\t\t\t\t\t\treq.onsuccess = (e)=>{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tresolve(Boolean(req.result));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treq.onerror = (e)=>{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treject(dealWithConstraint(req.error))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve(false)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\n\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t}\n\t\t\t},(e)=>{\n\t\t\t\tsameCompose(reject,trError);\n\t\t\t})\n\t\t});\n\t\treturn p;\n\t\t\n\t};\n\tthis.removeCategorie = (name)=>{\n\t\tvar txt = `removeCategorie`;\n\t\tvar p =  ()=> new Promise((resolve,reject)=>{\n\t\t\ttx((tx)=>{\n\t\t\t\tvar index = tx.objectStore(\"Categorie\").index(\"by_name\");\n\t\t\t\tvar request = index.openCursor(IDBKeyRange.only(toL(name)))\n\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\tvar cursor = request.result;\n\t\t\t\t\tif(cursor){\n\t\t\t\t\t\tvar req = cursor.delete();\n\t\t\t\t\t\treq.onsuccess = (e)=>{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tresolve(!req.result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treq.onerror = (e)=>{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treject(dealWithConstraint(req.error));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\n\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t}\n\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t});\n\t\treturn p;\n\t\t\n\t};\n\tthis.getCategorie = (name)=>{\n\t\tvar txt = 'getCategorie';\n\t\tvar tx = this.txR;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\ttx((tx)=>{\n\t\t\t\tvar index = tx.objectStore(\"Categorie\").index(\"by_name\");\n\t\t\t\tvar request = index.openCursor(toL(name));\n\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\tvar cursor = request.result;\n\t\t\t\t\tif(cursor){\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve([{id:cursor.primaryKey,...cursor.value}]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve([]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\n\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t}\n\t\t\t},(e)=>{\n\t\t\t\tsameCompose(reject,trError);\n\t\t\t});\n\t\t});\n\n\t\treturn p;\n\t};\n\n\tthis.getCategorieByKey = (id)=>{\n\t\tvar txt = 'getCategorieByKey';\n\t\tvar tx = this.txR;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\ttx((tx)=>{\n\t\t\t\tvar store = tx.objectStore(\"Categorie\");\n\t\t\t\tvar request = store.openCursor(id);\n\t\t\t\trequest.onsuccess = (s)=>{\n\t\t\t\t\tvar cursor = request.result;\n\t\t\t\t\tif(cursor){\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve({id:cursor.key,...cursor.value});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve(cursor);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\n\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t}\n\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t});\n\n\t\treturn p;\n\t}\n\n\tthis.getAllCategories = ()=>{\n\t\tvar txt = \"getAllCategories\";\n\t\tvar tx = this.txR;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\ttx((tx)=>{\n\t\t\t\tvar index = tx.objectStore(\"Categorie\").index(\"by_name\");\n\t\t\t\tvar request = (index.getAll && index.getAll()) || (index.mozGetAll && index.mozGetAll());\n\t\t\t\tif(request){\n\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve(request.result);\n\t\t\t\t\t}\n\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\n\t\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\trequest = index.openCursor();\n\t\t\t\t\tlet result = [];\n\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\tlet cursor = request.result;\n\t\t\t\t\t\tif(!cursor){\n\t\t\t\t\t\t\tconsole.log(\"getAllCategorie result\",result);\n\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tresult.push(cursor.value);\n\t\t\t\t\t\t\tcursor.continue();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\tconsole.error(\"getAllCategorie count Error\",e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t})\n\n\t\treturn p;\n\t}\n\tthis.insertSong = (name,verses,cat)=>{\n\t\tvar txt = 'insertSong';\n\t\tvar tx = this.txW;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\tif(typeof cat == \"number\"){\n\t\t\t\tthis.getCategorieByKey(cat)().then((r)=>{\n\t\t\t\t\tif(r){\n\t\t\t\t\t\ttx((tx)=>{\n\t\t\t\t\t\t\tvar store = tx.objectStore(\"Song\");\n\t\t\t\t\t\t\tvar request = store.put({name,verses,cat:cat});\n\t\t\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tresolve(Boolean(request.result));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t//window.eee = {e,er:request.error};\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treject({message:\"Foreign key constrain violated\",type:\"error\"})\n\t\t\t\t\t}\n\t\t\t\t}).Oups(reject);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.getCategorie(cat)().then((r)=>{\n\t\t\t\t\tr = r.pop();\n\t\t\t\t\tif(r){\n\t\t\t\t\t\tvar cat = r.id;\n\t\t\t\t\t\tif(cat){\n\t\t\t\t\t\t\tvar v =  this.insertSong(name,verses,cat)();\n\t\t\t\t\t\t\tv.then(resolve).Oups(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t\n\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t}\n\t\t\t\t}).Oups(reject);\n\t\t\t}\n\t\t})\n\t\treturn p;\n\n\t};\n\tthis.updateSong = (name,cat,newName,verses)=>{\n\t\tvar txt = \"updateSong\";\n\t\tvar tx = this.txW;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\tswitch(typeof cat){\n\t\t\t\tcase \"number\":\n\t\t\t\t\ttx((tx)=>{\n\t\t\t\t\t\tvar index = tx.objectStore(\"Song\").index(\"by_song_cat\");\n\t\t\t\t\t\tvar request = index.openCursor(IDBKeyRange.only([name,cat]));\n\t\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\t\tvar cursor = request.result;\n\t\t\t\t\t\t\tvar value = cursor.value;\n\t\t\t\t\t\t\tif(cursor){\n\t\t\t\t\t\t\t\tvar req = cursor.update({name:newName || value.name, verses:verses || value.verses,cat});\n\t\t\t\t\t\t\t\treq.onsuccess = (e)=>{\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tresolve(Boolean(req.result));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treq.onerror = (e)=>{\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\treject(dealWithConstraint(req.error));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\treject(false);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t\t\t}\n\t\t\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\t\tthis.getCategorie(cat)().then((r)=>{\n\t\t\t\t\t\tif(r){\n\t\t\t\t\t\t\tvar id = r.id;\n\t\t\t\t\t\t\tthis.updateSong(name,id,newName,verses)().then(resolve).Oups(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).Oups(reject);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t\n\t\t\t\t\treject({type:\"Error\",message:`Wrong categorie type ${cat}`});\n\n\t\t\t}\n\t\t});\n\n\t\treturn p;\n\n\t};\n\tthis.deleteSong = (name,cat)=>{\n\t\tvar txt = 'deleteSong';\n\t\tvar tx = this.txW;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\tswitch(typeof cat){\n\t\t\t\tcase \"number\":\n\t\t\t\t\ttx((tx)=>{\n\t\t\t\t\t\tvar index = tx.objectStore(\"Song\").index(\"by_song_cat\");\n\t\t\t\t\t\tvar request = index.openCursor(IDBKeyRange.only([name,cat]));\n\t\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\t\tvar cursor = request.result;\n\t\t\t\t\t\t\tif(cursor){\n\t\t\t\t\t\t\t\tvar req = cursor.delete();\n\t\t\t\t\t\t\t\treq.onsuccess = (e)=>{\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tresolve(!req.result);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treq.onerror = (e)=>{\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\treject(dealWithConstraint(req.error));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t\t\t}\n\t\t\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\t\tthis.getCategorie(cat)().then((r)=>{\n\t\t\t\t\t\tif(!Array.isArray(r))\n\t\t\t\t\t\t\tthrow Error(\"response should be array\");\n\t\t\t\t\t\tr = r.pop();\n\t\t\t\t\t\tif(r){\n\t\t\t\t\t\t\tvar id = r.id;\n\t\t\t\t\t\t\tthis.deleteSong(name,id)().then(resolve).Oups(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t}).Oups(reject);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t\n\t\t\t\t\treject({type:'Error',message:'Bad Categorie type'});\n\t\t\t}\n\t\t});\n\t\treturn p;\n\n\t};\n\tthis.getSong = (name,cat)=>{\n\t\tvar txt = 'getSong';\n\t\tvar tx = this.txR;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\tswitch(typeof cat){\n\t\t\t\tcase \"number\":\n\t\t\t\t\ttx((tx)=>{\n\t\t\t\t\t\tvar index = tx.objectStore(\"Song\").index(\"by_song_cat\");\n\t\t\t\t\t\tvar request = index.openCursor([name,cat]);\n\t\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tresolve(request.result);*/\n\t\t\t\t\t\t\tvar cursor = request.result;\n\t\t\t\t\t\t\tif(cursor){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tresolve([{id:cursor.primaryKey,...cursor.value}])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tresolve([]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t\t\t}\n\t\t\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\t\tthis.getCategorie(cat)().then((r)=>{\n\t\t\t\t\t\tif(r){\n\t\t\t\t\t\t\t var id = r.id;\n\t\t\t\t\t\t\t this.getSong(name,id)().then(resolve).Oups(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).Oups(reject);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t\n\t\t\t\t\treject({type:'error',message:`Bad Categorie type ${cat}`});\n\t\t\t}\n\t\t});\n\n\t\treturn p;\n\t};\n\tthis.getAllSongs = (cat)=>{\n\t\tvar txt = 'getAllSongs';\n\t\tvar tx = this.txR;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\t//console.log(\"Here is the typeof cat\",typeof cat);\n\t\t\tswitch(typeof cat){\n\t\t\t\tcase \"number\":\n\t\t\t\t\ttx((tx)=>{\n\t\t\t\t\t\tvar index = tx.objectStore(\"Song\").index(\"by_cat\");\n\t\t\t\t\t\tvar request = (index.getAll && index.getAll(cat)) || (index.mozGetAll && index.mozGetAll(cat));\n\t\t\t\t\t\tif(request){\n\t\t\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tresolve(request.result);\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\trequest = index.openCursor(cat);\n\t\t\t\t\t\t\tlet result = [];\n\t\t\t\t\t\t\trequest.onsuccess = ()=>{\n\t\t\t\t\t\t\t\tlet cursor = request.result;\n\n\t\t\t\t\t\t\t\tif(!cursor){\n\t\t\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tresult.push(cursor.value);\n\t\t\t\t\t\t\t\t\tcursor.continue();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\t\t\tconsole.log(\"getAllSong openCursor error\",e,request.error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\t\tthis.getCategorie(cat)().then((r)=>{\n\t\t\t\t\t\tr = r.pop();\n\t\t\t\t\t\tif(r){\n\t\t\t\t\t\t\tvar id = r.id;\n\t\t\t\t\t\t\tthis.getAllSongs(id)().then(resolve).Oups(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).Oups(reject);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t\n\t\t\t\t\treject({type:'error',message:`Bad Categorie type ${cat}`})\n\t\t\t}\n\t\t});\n\t\treturn p;\n\t}\n\tthis.countSong = (cat)=>{\n\t\tvar txt = 'countSong';\n\t\tvar tx = this.txR;\n\t\tvar p = ()=> new Promise((resolve,reject)=>{\n\t\t\tswitch(typeof cat){\n\t\t\t\tcase \"number\":\n\t\t\t\t\ttx((tx)=>{\n\t\t\t\t\t\tvar index = tx.objectStore(\"Song\").index(\"by_cat\");\n\t\t\t\t\t\tvar request = index.count(cat);\n\t\t\t\t\t\trequest.onsuccess = (e)=>{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tresolve(request.result);\n\t\t\t\t\t\t}\t\n\t\t\t\t\t\trequest.onerror = (e)=>{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treject(dealWithConstraint(request.error));\n\t\t\t\t\t\t}\n\t\t\t\t\t},(e)=> sameCompose(reject,trError));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\t\tthis.getCategorie(cat)().then((r)=>{\n\t\t\t\t\t\tif(r){\n\t\t\t\t\t\t\tvar id = r.id;\n\t\t\t\t\t\t\tthis.countSong(id)().then(resolve).Oups(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).Oups(reject);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t\n\t\t\t\t\treject({type:'error',message:`Bad Categorie type ${cat}`})\n\t\t\t}\n\t\t});\n\t\treturn p;\n\t}\n}\n\nmodule.exports = TTT;"],"names":["TTT","safeOp","dealWithConstraint","error","name","toLowerCase","code","message","toL","initialize","Promise","resolve","reject","version","request","indexedDB","open","onupgradeneeded","db","result","console","log","store1","createObjectStore","autoIncrement","store2","req1","createIndex","unique","req2","req3","sequences","PSeq","i1","onsuccess","onerror","i2","i3","subscribe","add","e","onblocked","Oups","clear","Array","prototype","forEach","call","objectStoreNames","o","deleteObjectStore","txR","f","onversionchange","close","length","then","er","tx","transaction","txW","insertCategorie","txt","p","store","objectStore","put","preventDefault","sameCompose","trError","updateCategorie","newName","index","openCursor","IDBKeyRange","only","cursor","req","update","Boolean","removeCategorie","getCategorie","id","primaryKey","value","getCategorieByKey","s","key","getAllCategories","getAll","mozGetAll","push","insertSong","verses","cat","r","type","pop","v","updateSong","deleteSong","isArray","Error","getSong","getAllSongs","countSong","count","module","exports"],"sourceRoot":""}